{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/steps-for-localizing-react-native-app",
    "result": {"data":{"site":{"siteMetadata":{"title":"Gruzhevstasy","author":"Ilya Gruzhevski","siteUrl":"https://ilyagru.github.io"}},"markdownRemark":{"id":"2ff32d6a-7a72-5e84-8b0a-2fe77c341239","excerpt":"Intro  The localization itself seems difficult for a React Native app because a usual app consists of three projects: the main JavaScript, Xcode project for iOS, and Android files. But in reality, it is not that complex. Necessary Packages i18next - localization framework (supports plurals…","html":"<h2>Intro</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/488ee0ba4e08f373651c3a9925d35bc7/64756/steps-for-localizing-react-native-app-featured-image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.760736196319016%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC3ElEQVQoz2WSa09TBwCGz59ZBtNUp1y0gLhibalcbItQKhtjEY3TmC2RLJbB1BrdEGhBQCplFHrKUOlK8YCyAjpRltIrPRRKLxh/yWPssi26D+/XJ+9N+Ho1x8dqXc3x5UqOlj8yNC9laFpM07CQxuDfpnZ+l1pfilOzSbSPkpyc2aJqWuYLUaZyKoHwP+DzPc4+SXLG/ReN0g6Ni2mMT1LoF7Kcdq3TcLEHjTuKdjaFelpG5ZE57k5wbHKTson4h8DW5SymF29pmw5yq/UWRk8I/bM99L5tav271E9t0HWhG6NdQvVwB5WYyLuqcG2i/DXOEWfsb+D7iF+tZGkO5GiXZG7bRPo67mL5aRSz6xU1vhQa6S367/toKKnm/OlWqu//SYWYpHwijnI8TulYjGJHFCHf13KWs0sZGgN7tIuvsF4f5saPdjq7hjHb5tH9votx8CnGpku0nDJhVJtQd4soxR2OOqOUjMUockQ5NBJBaAlkMS9lMD1No1/M0CVFsQz5uHa1l0s9M1x2Bqh3BWn/5RFa6wzmqjouGNo4YQtQMiFT6ghzeDTK5yMRFENhhH9WbJRS1PlTfLewhXVikSs3x+kY9HLVG0YlblLhfYP65gyG4waazls54krmXR18kODgcATFvTD7BkII+RWlNPVSDp20R9vDMDb3Et3uVa5PLXNubJVKcYsKzw5ayzg133ShufgzhxxxigbXKbvtRzEQ5DN7iELbBoJBSmPwbdHWL2K446b6NxmL+ALrXIgfPGtoH6yjGVqmfHSDY+fuotJ9i9JoQdczx5WObkyXO9nf95oCW4jC/iBC/fs7PE5gHvZT1+9DM71JsxhCNxnB6HhJpTNM1eAKpSNBDnTOobjmY59lnmL7GmW9AQ70rlHQv/GvhBrvNrrZbdTeNCcep6nyyJS7ZconEyidUY46YxSPJyhyxDjsTOQ7U9yPUzgQ4RN7lE9tYQps/wHfAcNjS0ma4vFuAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Steps for localizing app\"\n        title=\"Steps for localizing app\"\n        src=\"/static/488ee0ba4e08f373651c3a9925d35bc7/663f3/steps-for-localizing-react-native-app-featured-image.png\"\n        srcset=\"/static/488ee0ba4e08f373651c3a9925d35bc7/5e043/steps-for-localizing-react-native-app-featured-image.png 163w,\n/static/488ee0ba4e08f373651c3a9925d35bc7/e5cc6/steps-for-localizing-react-native-app-featured-image.png 325w,\n/static/488ee0ba4e08f373651c3a9925d35bc7/663f3/steps-for-localizing-react-native-app-featured-image.png 650w,\n/static/488ee0ba4e08f373651c3a9925d35bc7/d880f/steps-for-localizing-react-native-app-featured-image.png 975w,\n/static/488ee0ba4e08f373651c3a9925d35bc7/64756/steps-for-localizing-react-native-app-featured-image.png 1200w\"\n        sizes=\"(max-width: 650px) 100vw, 650px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>The localization itself seems difficult for a React Native app because a usual app consists of <strong>three</strong> projects: the main JavaScript, Xcode project for iOS, and Android files. But in reality, it is not that complex.</p>\n<h2>Necessary Packages</h2>\n<ul>\n<li><a href=\"https://www.i18next.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">i18next</a> - localization framework (supports plurals, formatting, interpolation, etc.)</li>\n<li><a href=\"https://react.i18next.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">react-i18next</a> - React bindings and helpers</li>\n<li><a href=\"https://momentjs.com/docs/#/i18n/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">moment</a> - Date / time handling in JavaScript (contains a lot of locales out of the box)</li>\n<li><a href=\"https://github.com/react-native-community/react-native-localize\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">react-native-localize</a> - toolbox for React Native</li>\n<li>e.g. <a href=\"https://github.com/wix/react-native-calendars\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">react-native-calendars</a> - Some other packages that should be localized</li>\n</ul>\n<h2>Steps</h2>\n<ol>\n<li>Set up i18next.</li>\n</ol>\n<p>A simple setup could look like this. We load resources of the supported languages and provide default and fallback languages.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// localization/index.ts</span>\n\n<span class=\"token keyword\">import</span> i18n <span class=\"token keyword\">from</span> <span class=\"token string\">'i18next'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> initReactI18next <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-i18next'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> getLocales <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-native-localize'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> locales <span class=\"token keyword\">from</span> <span class=\"token string\">'./locales'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> userLanguage <span class=\"token operator\">=</span> <span class=\"token function\">getLocales</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>languageCode<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> fallbacklanguage <span class=\"token operator\">=</span> <span class=\"token string\">'en'</span><span class=\"token punctuation\">;</span>\n\ni18n<span class=\"token punctuation\">.</span><span class=\"token function\">use</span><span class=\"token punctuation\">(</span>initReactI18next<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">init</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  resources<span class=\"token operator\">:</span> locales<span class=\"token punctuation\">,</span>\n  fallbackLng<span class=\"token operator\">:</span> fallbacklanguage<span class=\"token punctuation\">,</span>\n  lng<span class=\"token operator\">:</span> userLanguage<span class=\"token punctuation\">,</span>\n  ns<span class=\"token operator\">:</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>locales<span class=\"token punctuation\">.</span>en<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  defaultNS<span class=\"token operator\">:</span> <span class=\"token string\">'common'</span><span class=\"token punctuation\">,</span>\n  interpolation<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    escapeValue<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> <span class=\"token comment\">// react already safes from xss</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  react<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    wait<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> i18n<span class=\"token punctuation\">;</span></code></pre></div>\n<ol start=\"2\">\n<li>Set up other packages.</li>\n</ol>\n<p>For example, <code class=\"language-text\">moment</code> has locales out of the box, so we don’t need to translate date/time formats again. Just import the desired language data.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// localization/index.ts</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token string\">'moment/locale/fr.js'</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Imagine we have a library that also needs localizing, e.g. <code class=\"language-text\">react-native-calendars</code>. The documentation states the package can be localized – that is good. To simplify and unify even more we can take <code class=\"language-text\">moment</code>’s locale data and use it for this package.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// localization/index.ts</span>\n\n<span class=\"token keyword\">import</span> moment <span class=\"token keyword\">from</span> <span class=\"token string\">'moment'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> LocaleConfig <span class=\"token keyword\">as</span> RNCalendarsLocaleConfig <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-native-calendars'</span><span class=\"token punctuation\">;</span>\n\nObject<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>locales<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>locale<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  RNCalendarsLocaleConfig<span class=\"token punctuation\">.</span>locales<span class=\"token punctuation\">[</span>locale<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    monthNames<span class=\"token operator\">:</span> moment<span class=\"token punctuation\">.</span><span class=\"token function\">localeData</span><span class=\"token punctuation\">(</span>locale<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">months</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    monthNamesShort<span class=\"token operator\">:</span> moment<span class=\"token punctuation\">.</span><span class=\"token function\">localeData</span><span class=\"token punctuation\">(</span>locale<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">monthsShort</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    dayNames<span class=\"token operator\">:</span> moment<span class=\"token punctuation\">.</span><span class=\"token function\">localeData</span><span class=\"token punctuation\">(</span>locale<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">weekdays</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    dayNamesShort<span class=\"token operator\">:</span> moment<span class=\"token punctuation\">.</span><span class=\"token function\">localeData</span><span class=\"token punctuation\">(</span>locale<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">weekdaysMin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>And then we need add an event listener for language change to be able to set the <code class=\"language-text\">moment</code> and other packages language reactively.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// localization/index.ts</span>\n\ni18n<span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span><span class=\"token string\">'languageChanged'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>currentLanguage<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> locale <span class=\"token operator\">=</span> Object<span class=\"token punctuation\">.</span><span class=\"token function\">keys</span><span class=\"token punctuation\">(</span>locales<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">includes</span><span class=\"token punctuation\">(</span>currentLanguage<span class=\"token punctuation\">)</span> <span class=\"token operator\">?</span> currentLanguage <span class=\"token operator\">:</span> fallbacklanguage<span class=\"token punctuation\">;</span>\n\n  moment<span class=\"token punctuation\">.</span><span class=\"token function\">locale</span><span class=\"token punctuation\">(</span>locale<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  RNCalendarsLocaleConfig<span class=\"token punctuation\">.</span>defaultLocale <span class=\"token operator\">=</span> locale<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><em>NOTE</em>: Numbers or currency should also be localized, don’t forget about that.</p>\n<ol start=\"3\">\n<li>Extract all UI strings to <code class=\"language-text\">.json</code> files.</li>\n</ol>\n<p>You can either use one file or create many for every namespace. Just read the <code class=\"language-text\">i18n</code> docs, it supports plurals, context, interpolation, formatting, nesting, etc.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// localization/locales/en.json</span>\n\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"common\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"back\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Back\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"done\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Done\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"order\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"yourOrderIsOnItsWay\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Your order is on its way!\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"yourAddress\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Your order will be delivered on {{deliveryDate}} to {{address}}\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"subscribeToNewsletter\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Subscribe to Our Newsletter\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"item\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"{{count}} item\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"item_plural\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"{{count}} items\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Then in the code you need to pass those keys to the <code class=\"language-text\">t</code> function.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token comment\">// OrderComponent.tsx</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useTranslation <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-i18next'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">OrderComponent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> t <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useTranslation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">OrderContainer</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Text</span></span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">'order:yourAddress'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> deliveryDate<span class=\"token operator\">:</span> <span class=\"token string\">'4 Apr 2020'</span><span class=\"token punctuation\">,</span> address<span class=\"token operator\">:</span> <span class=\"token string\">'Warsaw, city centre'</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Text</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">OrderContainer</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// Outside of a component (e.g. navigation, utils, etc.)</span>\n\n<span class=\"token keyword\">import</span> i18n <span class=\"token keyword\">from</span> <span class=\"token string\">'./localization'</span><span class=\"token punctuation\">;</span>\n\ni18n<span class=\"token punctuation\">.</span><span class=\"token function\">t</span><span class=\"token punctuation\">(</span><span class=\"token string\">'common:back'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ol start=\"4\">\n<li>Add keys for strings that come from backend, so they could be localized on frontend, e.g. Push Notifications.</li>\n</ol>\n<p>One of challenges is to localize data which comes from backend. Ideally, the backend should not know the user’s locale. And all translation should happen in-app on the device. A solution to this is to send a key instead of plain text, and by that key provide a translated text using the <code class=\"language-text\">t</code> function. The same mechanism is used by Apple and Google for localizing Push Notifications. However, the downside is that all possible keys or Push Notifications text must be predefined beforehand.</p>\n<p>Here you can find more details on how to localize Push Notifications for both platforms.</p>\n<ul>\n<li><a href=\"https://github.com/CrossGeeks/FirebasePushNotificationPlugin/blob/master/docs/LocalizedFirebasePushNotifications.md\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Localised Push Notifications</a></li>\n<li><a href=\"https://developer.apple.com/library/archive/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/CreatingtheNotificationPayload.html\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Push Notifications iOS</a></li>\n<li><a href=\"https://firebase.google.com/docs/reference/fcm/rest/v1/projects.messages#androidnotification\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Push Notifications Android</a></li>\n</ul>\n<p>For backend requests that send some plain text to the mobile app, you can implement a similar system.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token comment\">// localization/locales/en.json</span>\n\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"order\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"orderedTooManyItemsError\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"You ordered {{count}} items – that is too many for one order. Please verify your cart.\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token comment\">// Handling the error text</span>\n\n<span class=\"token function\">t</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">.</span>key<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> count<span class=\"token operator\">:</span> response<span class=\"token punctuation\">.</span>error<span class=\"token punctuation\">.</span>args<span class=\"token punctuation\">.</span>itemCount <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ol start=\"5\">\n<li>Extract platform specific keys to <code class=\"language-text\">.strings</code> (iOS) or <code class=\"language-text\">.xml</code> (Android) files. This is the case for Push Notifications or <code class=\"language-text\">InfoPlist</code>.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"strings\"><pre class=\"language-strings\"><code class=\"language-strings\">/* ios/en.lproj/Localizable.strings */\n\n&quot;notification_order_sent&quot; = &quot;Your order %@ has just been sent to you.&quot;;\n&quot;notification_order_delivery_expected&quot; = &quot;Your order is expected to be delivered by %@.&quot;;</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"xml\"><pre class=\"language-xml\"><code class=\"language-xml\"><span class=\"token comment\">&lt;!-- android/app/src/main/res/values/strings.xml --></span>\n\n<span class=\"token prolog\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>resources</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>string</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>app_name<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Shooopio<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>string</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>string</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>notification_order_sent<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Your order %1$s has just been sent to you.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>string</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>string</span> <span class=\"token attr-name\">name</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>notification_order_delivery_expected<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>Your order is expected to be delivered by %1$s.<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>string</span><span class=\"token punctuation\">></span></span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>resources</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<ol start=\"6\">\n<li>Set up continuous localization</li>\n</ol>\n<p>The last step left is ability to continuously localize the app, it is better to accomplish this separately, so that the localization process could go independently. There are some tools and services for this. <code class=\"language-text\">i18n</code> supports <a href=\"https://www.i18next.com/overview/plugins-and-utils\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">plugins and utils</a> to help automate everything. Third party tools help with connecting to translators and pushing translations on the go. If you need something simple take a look at <a href=\"https://lingohub.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">LingoHub</a>, <a href=\"https://gitlocalize.com\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">GitLocalize</a>. If you need some complex solutions with more features check out <a href=\"https://www.smartling.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Smartling</a> or <a href=\"https://www.transifex.com/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">transifex</a>. The principles are alike. But in any case, be aware that some features are not very well supported in React Native.</p>\n<h2>General Flow</h2>\n<p>Here LingoHub is used for the example.</p>\n<ol>\n<li>\n<p>The platform automatically pulls source files (e.g. <code class=\"language-text\">en.json</code>) to the dashboard from a GitHub repo.</p>\n</li>\n<li>\n<p>When the base <code class=\"language-text\">en.json</code> file is changed or new keys are added, provide translations for the changed keys using the platform. Please ask a translator or a native speaker. They can just use the platofrm’s UI to translate.</p>\n</li>\n<li>\n<p>Download the translated and <em>Approved</em> files, it can be done by direct push or creating a PR into <code class=\"language-text\">develop</code> or <code class=\"language-text\">master</code> from the translation platform.</p>\n</li>\n<li>\n<p>When the new translations are merged, enable new languages in the app:</p>\n<ul>\n<li>for the UI, by importing a new locale into <code class=\"language-text\">i18n</code> resources.</li>\n<li>for the UI, by importing the needed <code class=\"language-text\">moment</code> locales into the translation setup file, more in the <a href=\"https://momentjs.com/docs/#/i18n/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">i18n section</a> of the docs.</li>\n<li>for the iOS project, by going to <em>Info tab</em> -> <em>Localizations</em> and including the new languages</li>\n<li>for the iOS project, by attaching the new languages to the corresponding <code class=\"language-text\">.strings</code> files (e.g. <code class=\"language-text\">InfoPlist.strings</code>) using <em>File Inspector</em> on the right pane.</li>\n</ul>\n</li>\n<li>\n<p>Then test the new languages! In some cases, remember to set the appropriate region to see correct date or number formats.</p>\n</li>\n</ol>\n<h2>Tips</h2>\n<ul>\n<li><code class=\"language-text\">moment</code> supports <a href=\"https://momentjs.com/docs/#/displaying/format/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">localized formats</a> (LTS, LL, lll), if you want a more custom localized format, take a look at <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Intl</a>. If you do use Intl you will have to add a polyfill for Android (<code class=\"language-text\">def jscFlavor = 'org.webkit:android-jsc-intl:+'</code>).</li>\n<li><code class=\"language-text\">moment</code> can be locale aware, for example it supports first day of week (Monday or Sunday).</li>\n<li><code class=\"language-text\">i18n</code> is very robust, has various plugins and utils for backend, linting, post-processing, etc.</li>\n<li><code class=\"language-text\">react-i18next</code> has everything that a react app needs (HOCs, hooks, render props, SSR, etc.).</li>\n<li>LingoHub doesn’t allow a lot of formatting translation files; remember that these kind of tools are somewhat limited in terms of React Native. For example, every type of file should have its own project in the dashboard (1 for <code class=\"language-text\">.json</code>, 2 for <code class=\"language-text\">.xml</code>, etc.).</li>\n</ul>\n<h2>Conclusion</h2>\n<p>That’s pretty it! And remember to check out docs before starting to localize the app. It is possible to achieve almost everything without reinventing the wheel. Happy localizing!</p>","frontmatter":{"title":"Steps for Localizing React Native App","date":"March 21, 2020","summary":"The localization itself seems difficult for a React Native app because a usual app consists of three projects: the main JavaScript, Xcode project for iOS, and Android files. But in reality, it is not that complex.","featuredImage":{"childImageSharp":{"gatsbyImageData":{"layout":"fixed","backgroundColor":"#58b8d8","images":{"fallback":{"src":"/static/488ee0ba4e08f373651c3a9925d35bc7/b5380/steps-for-localizing-react-native-app-featured-image.png","srcSet":"/static/488ee0ba4e08f373651c3a9925d35bc7/b5380/steps-for-localizing-react-native-app-featured-image.png 1200w","sizes":"1200px"},"sources":[{"srcSet":"/static/488ee0ba4e08f373651c3a9925d35bc7/81547/steps-for-localizing-react-native-app-featured-image.webp 1200w","type":"image/webp","sizes":"1200px"}]},"width":1200,"height":630}}}}}},"pageContext":{"slug":"steps-for-localizing-react-native-app","source":"blog","previous":{"fields":{"slug":"take-care-of-your-eyes-when-staying-at-home","source":"blog"},"frontmatter":{"title":"Take Care of Your Eyes When Staying at Home"}},"next":{"fields":{"slug":"react-context-toaster","source":"blog"},"frontmatter":{"title":"Toast messages mechanism in React Native using React Context"}}}},
    "staticQueryHashes": ["3128451518","4268320825","637957696"]}